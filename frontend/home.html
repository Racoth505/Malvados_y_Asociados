<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FINSY - Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <header class="topbar">
    <div class="brand">FINSY</div>
    <div class="top-actions">
      <span class="user" id="userLabel">Usuario</span>
      <button class="btn-logout" onclick="logout()">Cerrar sesión</button>
    </div>
  </header>

  <main class="wrap">
    
    <section class="card card-profit">
      <h2 class="title">PROFIT</h2>

      <div class="profit-grid">
        <div class="ring-block">
          <div class="ring" data-ring="profit">
            <svg viewBox="0 0 120 120" class="ring-svg" id="profitRingSvg"></svg>
            <div class="ring-center">
              <div class="ring-amount" id="profitAmount">$0</div>
              <div class="ring-sub" id="profitMonth">
                <span class="nav-arrow" id="prevArrow" onclick="prevMonth()">‹</span>
                <span id="profitMonthText">Mes</span>
                <span class="nav-arrow" id="nextArrow" onclick="nextMonth()">›</span>
              </div>
            </div>
          </div>
          
          <div class="icon-actions">
            <button class="icon-btn danger" id="addExpenseBtn" title="Nuevo Gasto">−</button>
            <button class="icon-btn success" id="addIncomeBtn" title="Nuevo Ingreso">+</button>
          </div>
        </div>

        <div class="profit-side">
          <div class="side-group">
            <div class="side-label ok">Últimos Ingresos</div>
            <div class="mini-list" id="miniIncomeList"></div>
          </div>
          <div class="side-group">
            <div class="side-label bad">Últimos Gastos</div>
            <div class="mini-list" id="miniExpenseList"></div>
          </div>
        </div>
      </div>
    </section>

    <hr class="divider" />

    <section class="row">
      
      <section class="card card-fixed">
        <h2 class="title red">Gastos</h2>
        
        <div class="ring" data-ring="expense">
          <svg viewBox="0 0 120 120" class="ring-svg" id="expenseRingSvg"></svg>
          <div class="ring-center">
            <div class="ring-amount red" id="expenseAmount">$0</div>
            <div class="ring-sub" id="expenseLabel">Total</div>
          </div>
        </div>
        
        <div class="filters">
          <label class="select">
            <span>Filtro:</span>
            <select id="expenseFilter">
              <option value="all">Todos</option>
            </select>
          </label>
        </div>
        <div class="legend" id="expenseLegend"></div>

        <div class="list" id="expenseList"></div>
      </section>

      <section class="card card-fixed">
        <h2 class="title green">Ingresos</h2>
        
        <div class="ring" data-ring="income">
          <svg viewBox="0 0 120 120" class="ring-svg">
            <circle class="ring-bg" cx="60" cy="60" r="46"></circle>
            <circle class="ring-fg green-ring" cx="60" cy="60" r="46"></circle>
          </svg>
          <div class="ring-center">
            <div class="ring-amount green" id="incomeAmount">$0</div>
            <div class="ring-sub" id="incomeMonth">Mes</div>
          </div>
        </div>
        
        <div class="spacer-fix"></div>

        <div class="list" id="incomeList"></div>
      </section>

    </section>
  </main>

  <dialog class="modal" id="movementModal">
    <form class="modal-card" id="movementForm">
      
      <div class="modal-head">
        <h3 id="modalTitle">Nuevo movimiento</h3>
      </div>

      <div class="grid">
        <input type="hidden" id="editId" value="" />
        
        <label>
          <span>Cantidad</span>
          <input id="movAmount" type="number" step="0.01" required />
        </label>
        <label>
          <span>Fecha</span>
          <input id="movDate" type="date" required />
        </label>
        <label class="full">
          <span>Concepto</span>
          <input id="movConcept" maxlength="25" required />
        </label>

        <div id="expenseFields" class="full grid-inner">
          <label>
            <span>Categoría</span>
            <select id="movCategory"></select>
          </label>
          <label>
            <span>Color</span>
            <input id="movColor" type="color" value="#ff0000" style="height: 45px; padding: 2px; cursor: pointer;" />
          </label>
        </div>
      </div>

      <p class="error" id="formError" hidden></p>

      <div class="modal-actions">
        <button type="button" class="btn danger" id="deleteBtn">Eliminar</button>
        <div class="right-actions">
          <button type="button" class="btn ghost" id="cancelBtn">Cancelar</button>
          <button type="submit" class="btn primary">Guardar</button>
        </div>
      </div>

    </form>
  </dialog>

  <script src="app.js"></script>
</body>
</html>